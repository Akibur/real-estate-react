{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport useAuth from \"./useAuth\";\nconst useLands = () => {\n  _s();\n  const [lands, setLands] = useState([]);\n  const [displayLands, setDisplayLands] = useState([]);\n  const [userLands, setUserLands] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const user = useAuth();\n  useEffect(() => {\n    console.log(\"loading state\", isLoading);\n    fetch('http://localhost:5000/lands').then(res => res.json()).then(data => {\n      setLands(data);\n      setDisplayLands(data);\n      const userL = data.filter(land => land.owner.email == user.user.email);\n      console.log(userL);\n      console.log(user.user.email);\n      setUserLands(userL);\n    }).catch(err => {});\n  }, [isLoading]);\n  const deleteLand = id => {\n    setIsLoading(true);\n    fetch(`http://localhost:5000/lands/${id}`, {\n      method: 'DELETE',\n      headers: {\n        'authorization': `Bearer ${localStorage.getItem('idToken')}`,\n        'content-type': 'application/json'\n      }\n    }).then(data => {\n      data.json();\n      setIsLoading(false);\n    });\n  };\n  const createLand = land => {\n    setIsLoading(true);\n    fetch(`http://localhost:5000/lands/`, {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json'\n      },\n      body: JSON.stringify(land)\n    }).then(data => {\n      data.json();\n      setIsLoading(false);\n    });\n  };\n  const updateLand = (id, saleStatus) => {\n    console.log(\"ID\", id);\n    console.log(\"Sale Status\", saleStatus);\n    setIsLoading(true);\n    fetch(`http://localhost:5000/lands/${id}`, {\n      method: 'PATCH',\n      headers: {\n        \"authorization\": `Bearer ${localStorage.getItem('idToken')}`,\n        'content-type': 'application/json'\n      },\n      body: JSON.stringify(saleStatus)\n    }).then(data => {\n      data.json();\n      setIsLoading(false);\n    });\n  };\n  return [lands, userLands, displayLands, setDisplayLands, isLoading, deleteLand, createLand, updateLand];\n};\n_s(useLands, \"tvuf/GA881Dl8H2BeSPd90g6W3E=\", false, function () {\n  return [useAuth];\n});\nexport default useLands;","map":{"version":3,"names":["useEffect","useState","useAuth","useLands","lands","setLands","displayLands","setDisplayLands","userLands","setUserLands","isLoading","setIsLoading","user","console","log","fetch","then","res","json","data","userL","filter","land","owner","email","catch","err","deleteLand","id","method","headers","localStorage","getItem","createLand","body","JSON","stringify","updateLand","saleStatus"],"sources":["/Users/akiburrahman/Desktop/Development/Msc/real-estate/real-estate-react/src/hooks/useLands.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport useAuth from \"./useAuth\";\n\nconst useLands = () => {\n    const [lands, setLands] = useState([]);\n    const [displayLands, setDisplayLands] = useState([]);\n    const [userLands, setUserLands] = useState([]);\n    const [isLoading, setIsLoading] = useState(false);\n    const user = useAuth();\n\n\n    useEffect(() => {\n        console.log(\"loading state\", isLoading);\n        fetch('http://localhost:5000/lands')\n            .then(res => res.json())\n            .then(data => {\n                setLands(data);\n                setDisplayLands(data);\n                const userL = data.filter(land => land.owner.email == user.user.email);\n                console.log(userL);\n                console.log(user.user.email);\n                setUserLands(userL);\n            }).catch((err) => {\n            });\n    }, [isLoading]);\n\n    const deleteLand = (id) => {\n        setIsLoading(true);\n        fetch(`http://localhost:5000/lands/${id}`, {\n            method: 'DELETE',\n            headers: {\n                'authorization': `Bearer ${localStorage.getItem('idToken')}`,\n                'content-type': 'application/json'\n            },\n        })\n            .then(\n                (data) => {\n                    data.json();\n                    setIsLoading(false);\n                });\n\n    };\n\n    const createLand = (land) => {\n        setIsLoading(true);\n        fetch(`http://localhost:5000/lands/`, {\n            method: 'POST',\n            headers: {\n                'content-type': 'application/json'\n            },\n            body: JSON.stringify(land)\n        })\n            .then(\n                (data) => {\n                    data.json();\n                    setIsLoading(false);\n                });\n\n    };\n\n    const updateLand = (id, saleStatus) => {\n        console.log(\"ID\", id);\n        console.log(\"Sale Status\", saleStatus);\n        setIsLoading(true);\n        fetch(`http://localhost:5000/lands/${id}`, {\n            method: 'PATCH',\n            headers: {\n                \"authorization\": `Bearer ${localStorage.getItem('idToken')}`,\n                'content-type': 'application/json'\n            },\n            body: JSON.stringify(saleStatus)\n        })\n            .then(\n                (data) => {\n                    data.json();\n                    setIsLoading(false);\n                });\n\n    };\n\n\n\n    return [\n        lands,\n        userLands,\n        displayLands,\n        setDisplayLands,\n        isLoading,\n        deleteLand,\n        createLand,\n        updateLand\n    ];\n};\n\nexport default useLands;"],"mappings":"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"},"metadata":{},"sourceType":"module"}